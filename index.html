<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Clock</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="style"><p id="local">Loading...</p></div>
    <h1 id="title">World Clock</h1>
    <div id="outputStyle">
        <div id="innerStyle"><div id="output"></div></div>
    </div>
    <script >
        var timer = setInterval(displayWorldTime, 1000);

        var cities =[
            {name: "Samoa", utcOffset: +13, flag: "Samoa.png"},
            {name: "Auckland", utcOffset: +12, flag: "New-Zealand.png"},
            {name: "Kosrae", utcOffset: +11, flag: "Micronesia-(Federated).png"},
            {name: "Port Moresby", utcOffset: +10, flag: "png.png"},
            {name: "Seoul", utcOffset: +9, flag: "Korea,-south.png"},
            {name: "Ulaanbaatar", utcOffset: +8, flag: "Mongolia.png"},
            {name: "Vientiane", utcOffset: +7, flag: "Laos.png"},
            {name: "Bishkek", utcOffset: +6, flag: "Kyrgyzstan.png"},
            {name: "Samarkand", utcOffset: +5, flag: "Uzbekistan.png"},
            {name: "Baku", utcOffset: +4, flag: "Azerbaijan.png"},
            {name: "Dar es Salaam", utcOffset: +3, flag: "Tanzania.png"},
            {name: "Sofia", utcOffset: +2, flag: "Bulgaria.png"},
            {name: "Azores", utcOffset: +1, flag: "Portugal.png"},
            {name: "Reykjavik", utcOffset: 0, flag: "Iceland.png"},
            {name: "Buenos Aires", utcOffset: -3, flag: "Argentina.png"},
            {name: "Caracas", utcOffset: -4, flag: "Venezuela.png"},
            {name: "Bogota", utcOffset: -5, flag: "Colombia.png"},
            {name: "Mexico City", utcOffset: -6, flag: "Mexico.png"},
            {name: "Chicago", utcOffset: -7, flag: "United-States-of-America.png"},
            {name: "Mexicali", utcOffset: -8, flag: "Mexico.png"},
            {name: "Rikitea, Polynesia", utcOffset: -9, flag: "France.png"},
            {name: "Honolulu", utcOffset: -10, flag: "United-States-of-America.png"}

        ];

        cities.sort(compare);

        function compare(a, b){
            var cityA = a.name;
            var cityB = b.name;

            var comparison = 0;

            if (cityA < cityB) {
                comparison = -1;
            } else if (cityA > cityB) {
                comparison = 1;
            }

            return comparison;
        }

        function getUtcTime(){
            var dt = new Date();
            var utcOffset = dt.getTimezoneOffset() * 60000; // in milliseconds
            var utcTime = new Date(dt.getTime() + utcOffset);
            return utcTime.getTime();
        }

        function getCurrentTime(utcOffset){
            var mil = 1000 * 60 * 60;
            var time = new Date(getUtcTime() + (utcOffset * mil));
            return time.toLocaleTimeString();
        }

        function displayWorldTime(){
            var dt = new Date();
            document.getElementById("local").innerHTML = "local time: " + dt.toLocaleTimeString();

            var output = `<table border="1" align="center" id="cities">`;
            output += `<tr>
                            <th class="col1"></th>
                            <th class="col2"></th>
                            <th class="col3"></th>
                        </tr>
                    `;

            for(a = 0; a < cities.length; a++){
                output += 
                    `<tr>
                    <td><img src="img/img/${cities[a].flag}"/></td>
                    <td>${cities[a].utcOffset} -${cities[a].name}</td>
                    <td>${getCurrentTime(cities[a].utcOffset)}</td>
                    </tr>`
                ;
            }
            output += `</table>`;
            document.getElementById("output").innerHTML = output;
        }
    </script>
</body>
</html>